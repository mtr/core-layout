/*! For license information please see commons-main-stateDirectives.js.023d9bd98e4134d0815e.js.LICENSE.txt */
"use strict";(self.webpackChunkcore_layout=self.webpackChunkcore_layout||[]).push([[450],{1314:function(t,e,r){var n,a,i,u=r(964),o=r(9875);function c(t){var e=t.match(/^\s*({[^}]*})\s*$/);e&&(t="("+e[1]+")");var r=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/);if(!r||4!==r.length)throw new Error("Invalid state ref '"+t+"'");return{state:r[1]||null,paramExpr:r[3]||null}}function s(t){var e=t.parent().inheritedData("$uiView"),r=(0,o.parse)("$cfg.path")(e);return r?(0,o.tail)(r).state.name:void 0}function f(t,e,r){var n=r.uiState||t.current.name,a=(0,o.extend)(function(t,e){return{relative:s(t)||e.$current,inherit:!0,source:"sref"}}(e,t),r.uiStateOpts||{}),i=t.href(n,r.uiStateParams,a);return{uiState:n,uiStateParams:r.uiStateParams,uiStateOpts:a,href:i}}function l(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),r="FORM"===t[0].nodeName;return{attr:r?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!r}}function v(t,e,r,n,a){return function(i){var u=i.which||i.button,o=a();if(!(u>1||i.ctrlKey||i.metaKey||i.shiftKey||i.altKey||t.attr("target"))){var c=r((function(){t.attr("disabled")||e.go(o.uiState,o.uiStateParams,o.uiStateOpts)}));i.preventDefault();var s=n.isAnchor&&!o.href?1:0;i.preventDefault=function(){s--<=0&&r.cancel(c)}}}}function S(t,e,r,n){var a;n&&(a=n.events),(0,o.isArray)(a)||(a=["click"]);for(var i=t.on?"on":"bind",u=0,c=a;u<c.length;u++){var s=c[u];t[i](s,r)}e.$on("$destroy",(function(){for(var e=t.off?"off":"unbind",n=0,i=a;n<i.length;n++){var u=i[n];t[e](u,r)}}))}n=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,a,i,u){var s=l(a),p=u[1]||u[0],$=null,h={},d=function(){return f(r,a,h)},m=c(i.uiSref);function g(){var t=d();$&&$(),p&&($=p.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&i.$set(s.attr,t.href)}if(h.uiState=m.state,h.uiStateOpts=i.uiSrefOpts?n.$eval(i.uiSrefOpts):{},m.paramExpr&&(n.$watch(m.paramExpr,(function(t){h.uiStateParams=(0,o.extend)({},t),g()}),!0),h.uiStateParams=(0,o.extend)({},n.$eval(m.paramExpr))),g(),n.$on("$destroy",t.stateRegistry.onStatesChanged(g)),n.$on("$destroy",t.transitionService.onSuccess({},g)),s.clickable){var y=v(a,r,e,s,d);S(a,n,y,h.uiStateOpts)}}}}],a=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,a,i,u){var c,s=l(a),p=u[1]||u[0],$=null,h={},d=function(){return f(r,a,h)},m=["uiState","uiStateParams","uiStateOpts"],g=m.reduce((function(t,e){return t[e]=o.noop,t}),{});function y(){var t=d();$&&$(),p&&($=p.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&i.$set(s.attr,t.href)}m.forEach((function(t){h[t]=i[t]?n.$eval(i[t]):null,i.$observe(t,(function(e){g[t](),g[t]=n.$watch(e,(function(e){h[t]=e,y()}),!0)}))})),y(),n.$on("$destroy",t.stateRegistry.onStatesChanged(y)),n.$on("$destroy",t.transitionService.onSuccess({},y)),s.clickable&&(c=v(a,r,e,s,d),S(a,n,c,h.uiStateOpts))}}}],i=["$state","$stateParams","$interpolate","$uiRouter",function(t,e,r,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,a,i){var u,f,l,v,S,p=[];u=r(i.uiSrefActiveEq||"",!1)(e);try{f=e.$eval(i.uiSrefActive)}catch(t){}function $(t){t.promise.then(m,o.noop)}function h(t){(0,o.isObject)(t)&&(p=[],(0,o.forEach)(t,(function(t,r){var n=function(t,r){var n=c(t);d(n.state,e.$eval(n.paramExpr),r)};(0,o.isString)(t)?n(t,r):(0,o.isArray)(t)&&(0,o.forEach)(t,(function(t){n(t,r)}))})))}function d(e,r,n){var i={state:t.get(e,s(a))||{name:e},params:r,activeClass:n};return p.push(i),function(){(0,o.removeFrom)(p)(i)}}function m(){var r=function(t){return t.split(/\s/).filter(o.identity)},n=function(t){return t.map((function(t){return t.activeClass})).map(r).reduce(o.unnestR,[])},i=n(p).concat(r(u)).reduce(o.uniqR,[]),c=n(p.filter((function(e){return t.includes(e.state.name,e.params)}))),s=p.filter((function(e){return t.is(e.state.name,e.params)})).length?r(u):[],f=c.concat(s).reduce(o.uniqR,[]),l=i.filter((function(t){return!(0,o.inArray)(f,t)}));e.$evalAsync((function(){f.forEach((function(t){return a.addClass(t)})),l.forEach((function(t){return a.removeClass(t)}))}))}h(f=f||r(i.uiSrefActive||"",!1)(e)),this.$$addStateInfo=function(t,e){if(!((0,o.isObject)(f)&&p.length>0)){var r=d(t,e,f);return m(),r}},e.$on("$destroy",(l=n.stateRegistry.onStatesChanged((function(){h(f)})),v=n.transitionService.onStart({},$),S=e.$on("$stateChangeSuccess",m),function(){l(),v(),S()})),n.globals.transition&&$(n.globals.transition),m()}]}}],u.ng.module("ui.router.state").directive("uiSref",n).directive("uiSrefActive",i).directive("uiSrefActiveEq",i).directive("uiState",a)}}]);