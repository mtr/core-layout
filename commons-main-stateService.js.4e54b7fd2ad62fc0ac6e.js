/*! For license information please see commons-main-stateService.js.4e54b7fd2ad62fc0ac6e.js.LICENSE.txt */
"use strict";(self.webpackChunkcore_layout=self.webpackChunkcore_layout||[]).push([[900],{3588:function(r,t,e){e.d(t,{b:function(){return y}});var i=e(6127),n=e(3668),o=e(1454),a=e(9933),s=e(156),u=e(7427),l=e(3318),c=e(9808),h=e(4658),f=e(3253),d=e(8115),p=e(6222),v=e(7339),g=e(954),y=function(){function r(t){this.router=t,this.invalidCallbacks=[],this._defaultErrorHandler=function(r){r instanceof Error&&r.stack?(console.error(r),console.error(r.stack)):r instanceof c.i?(console.error(r.toString()),r.detail&&r.detail.stack&&console.error(r.detail.stack)):console.error(r)};var e=Object.keys(r.prototype).filter((0,g.ff)((0,i.d3)(["current","$current","params","transition"])));(0,i.WR)((0,g.P0)(r.prototype),this,(0,g.P0)(this),e)}return Object.defineProperty(r.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){this.defaultErrorHandler(i.ZT),this.invalidCallbacks=[]},r.prototype._handleInvalidTargetState=function(r,t){var e=this,i=s.C.makeTargetState(this.router.stateRegistry,r),n=this.router.globals,u=function(){return n.transitionHistory.peekTail()},l=u(),f=new o.c(this.invalidCallbacks.slice()),d=new p.l(r).injector(),v=function(r){if(r instanceof h.F){var t=r;return(t=e.target(t.identifier(),t.params(),t.options())).valid()?u()!==l?c.i.superseded().toPromise():e.transitionTo(t.identifier(),t.params(),t.options()):c.i.invalid(t.error()).toPromise()}};return function r(){var e=f.dequeue();return void 0===e?c.i.invalid(t.error()).toPromise():a.u.$q.when(e(t,i,d)).then(v).then((function(t){return t||r()}))}()},r.prototype.onInvalid=function(r){return this.invalidCallbacks.push(r),function(){(0,i.nA)(this.invalidCallbacks)(r)}.bind(this)},r.prototype.reload=function(r){return this.transitionTo(this.current,this.params,{reload:!(0,n.$K)(r)||r,inherit:!1,notify:!1})},r.prototype.go=function(r,t,e){var n={relative:this.$current,inherit:!0},o=(0,i.ce)(e,n,l.q);return this.transitionTo(r,t,o)},r.prototype.target=function(r,t,e){if(void 0===e&&(e={}),(0,n.Kn)(e.reload)&&!e.reload.name)throw new Error("Invalid reload state object");var i=this.router.stateRegistry;if(e.reloadState=!0===e.reload?i.root():i.matcher.find(e.reload,e.relative),e.reload&&!e.reloadState)throw new Error("No such reload state '"+((0,n.HD)(e.reload)?e.reload:e.reload.name)+"'");return new h.F(this.router.stateRegistry,r,t,e)},r.prototype.getCurrentPath=function(){var r=this.router.globals.successfulTransitions.peekTail();return r?r.treeChanges().to:[new u.V(this.router.stateRegistry.root())]},r.prototype.transitionTo=function(r,t,e){var n=this;void 0===t&&(t={}),void 0===e&&(e={});var o=this.router,s=o.globals;e=(0,i.ce)(e,l.q);var u=function(){return s.transition};e=(0,i.l7)(e,{current:u});var f=this.target(r,t,e),d=this.getCurrentPath();if(!f.exists())return this._handleInvalidTargetState(d,f);if(!f.valid())return(0,i.jv)(f.error());if(!1===e.supercede&&u())return c.i.ignored("Another transition is in progress and supercede has been set to false in TransitionOptions for the transition. So the transition was ignored in favour of the existing one in progress.").toPromise();var p=function(r){return function(t){if(t instanceof c.i){var e=o.globals.lastStartedTransitionId<=r.$id;if(t.type===c.K.IGNORED)return e&&o.urlRouter.update(),a.u.$q.when(s.current);var i=t.detail;if(t.type===c.K.SUPERSEDED&&t.redirected&&i instanceof h.F){var u=r.redirect(i);return u.run().catch(p(u))}if(t.type===c.K.ABORTED)return e&&o.urlRouter.update(),a.u.$q.reject(t)}return n.defaultErrorHandler()(t),a.u.$q.reject(t)}},v=this.router.transitionService.create(d,f),g=v.run().catch(p(v));return(0,i.HX)(g),(0,i.l7)(g,{transition:v})},r.prototype.is=function(r,t,e){e=(0,i.ce)(e,{relative:this.$current});var o=this.router.stateRegistry.matcher.find(r,e.relative);if((0,n.$K)(o)){if(this.$current!==o)return!1;if(!t)return!0;var a=o.parameters({inherit:!0,matchingKeys:t});return f.d.equals(a,f.d.values(a,t),this.params)}},r.prototype.includes=function(r,t,e){e=(0,i.ce)(e,{relative:this.$current});var o=(0,n.HD)(r)&&d.r.fromString(r);if(o){if(!o.matches(this.$current.name))return!1;r=this.$current.name}var a=this.router.stateRegistry.matcher.find(r,e.relative),s=this.$current.includes;if((0,n.$K)(a)){if(!(0,n.$K)(s[a.name]))return!1;if(!t)return!0;var u=a.parameters({inherit:!0,matchingKeys:t});return f.d.equals(u,f.d.values(u,t),this.params)}},r.prototype.href=function(r,t,e){var o={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};e=(0,i.ce)(e,o),t=t||{};var a=this.router.stateRegistry.matcher.find(r,e.relative);if(!(0,n.$K)(a))return null;e.inherit&&(t=this.params.$inherit(t,this.$current,a));var s=a&&e.lossy?a.navigable:a;return s&&void 0!==s.url&&null!==s.url?this.router.urlRouter.href(s.url,t,{absolute:e.absolute}):null},r.prototype.defaultErrorHandler=function(r){return this._defaultErrorHandler=r||this._defaultErrorHandler},r.prototype.get=function(r,t){var e=this.router.stateRegistry;return 0===arguments.length?e.get():e.get(r,t||this.$current)},r.prototype.lazyLoad=function(r,t){var e=this.get(r);if(!e||!e.lazyLoad)throw new Error("Can not lazy load "+r);var i=this.getCurrentPath(),n=s.C.makeTargetState(this.router.stateRegistry,i);return t=t||this.router.transitionService.create(i,n),(0,v.A)(t,e)},r}()}}]);